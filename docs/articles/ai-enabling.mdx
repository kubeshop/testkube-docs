# Enabling Testkube AI Features - Complete Guide

## Cloud Control Plane Users

For users of the Testkube Cloud Control Plane, enabling AI functionality is straightforward:

### Enable AI Assistant

The Testkube AI Assistant is disabled by default for new organizations.

**How to enable:**

1. **Via the Initial AI Assistant Prompt:** 
   When you first access the AI Assistant, an initial prompt is displayed with action buttons that allow you to either enable the feature or keep it disabled.

2. **Through Organization Settings:**  
   Navigate to **Organization Settings** → **Product Features** tab and toggle **AI Assistant** on.

Once enabled, AI Assistant will integrate with your Testkube Dashboard, ready to assist you and your team.

:::info
The LLM used by AI functionality in Testkube Cloud is OpenAI's [GPT-5.2-Codex](https://openai.com/index/introducing-gpt-5-2-codex/).

For Cloud installations, the LLM and model cannot be changed — everything is managed by Testkube.
:::

## Testkube On-Prem Deployments

**Prerequisites:**
- OpenAI API key (or compatible LLM API)
- PostgreSQL database (for conversation persistence)

---

### Option 1: Minimal Setup (with bundled PostgreSQL)

Best for trials and non-production environments:

```yaml
# Enable bundled PostgreSQL (not production-grade)
postgresql:
  enabled: true

# Enable AI service
testkube-ai-service:
  enabled: true
  db:
    url: postgresql://testkube:postgres5432@testkube-enterprise-postgresql:5432/ai?sslmode=disable
  llmApi:
    secretRef: my-openai-secret        # Secret containing OPENAI_API_KEY
    secretRefKey: OPENAI_API_KEY

# Enable AI in the dashboard
testkube-cloud-ui:
  ai:
    enabled: true
```

---

### Option 2: Production Setup (Bring Your Own PostgreSQL)

Recommended for production with managed PostgreSQL (AWS RDS, GCP Cloud SQL, Azure Database, etc.):

```yaml
testkube-ai-service:
  enabled: true
  db:
    secretRef:
      name: my-postgres-credentials     # Secret with DB credentials
      endpointKey: host                 # Key containing DB host
      usernameKey: username             # Key containing DB username  
      passwordKey: password             # Key containing DB password
    # Database name (defaults to 'ai' if empty)
    name: "testkube_ai"
  llmApi:
    secretRef: my-openai-secret
    secretRefKey: OPENAI_API_KEY

testkube-cloud-ui:
  ai:
    enabled: true
```

---

### Optional: Custom LLM Endpoint

For Azure OpenAI, self-hosted models, or other OpenAI-compatible APIs:

```yaml
testkube-ai-service:
  llmApi:
    url: "https://my-company.openai.azure.com/openai/deployments/gpt-4o"
    modelName: "gpt-4o"
    secretRef: my-azure-openai-secret
    secretRefKey: AZURE_OPENAI_KEY
```

---

### What Gets Enabled

| Feature | Description |
|---------|-------------|
| **Chats** | AI assistant in the sidebar for workflow help |
| **AI Agents** | Configurable MCP agents in Environment Settings |

---

### Default Values Reference

| Setting | Default | Required for AI |
|---------|---------|-----------------|
| `testkube-ai-service.enabled` | `false` | ✅ Must be `true` |
| `testkube-cloud-ui.ai.enabled` | `false` | ✅ Must be `true` |
| `testkube-ai-service.db.*` | empty | ✅ PostgreSQL required |
| `testkube-ai-service.llmApi.secretRef` | empty | ✅ OpenAI key required |
| `postgresql.enabled` | `false` | Only if using bundled DB |